IF(NOT COVISE_BUILD_DRIVINGSIM)
  RETURN()
ENDIF()
USING(XERCESC BOOST)
if(NOT XENOMAI_FOUND OR NOT COVISE_USE_XENOMAI)
  RETURN()
endif(NOT XENOMAI_FOUND OR NOT COVISE_USE_XENOMAI)
SET(HEADERS
 XenomaiPlugin.h
)
SET(SOURCES
 XenomaiPlugin.cpp
)
COVISE_FIND_PACKAGE(V8)
INCLUDE_DIRECTORIES(
   ../../../DrivingSim/VehicleUtil
   ${V8_INCLUDE_DIR}
)


OPTION (COVISE_USE_XENOMAI "Use Xenomai" ON)
COVISE_FIND_PACKAGE(Xenomai)
if(XENOMAI_FOUND AND COVISE_USE_XENOMAI)
 SET(HEADERS ${HEADERS}
 )
 SET(SOURCES  ${SOURCES}
 )

 ADD_DEFINITIONS(${XENOMAI_DEFINITIONS})

 INCLUDE_DIRECTORIES(
   ${XENOMAI_INCLUDE_DIR}
   ../../../DrivingSim/gaalet

 )
endif(XENOMAI_FOUND AND COVISE_USE_XENOMAI)



cover_add_plugin_TARGET(Xenomai)

TARGET_LINK_LIBRARIES(Xenomai
   coVRML
   coOpenVehicleUtil
)
COVISE_WNOERROR(Xenomai)
COVER_INSTALL_PLUGIN(Xenomai)

if(XENOMAI_FOUND AND COVISE_USE_XENOMAI)
 TARGET_LINK_LIBRARIES(Xenomai
   ${XENOMAI_LIBRARY_NATIVE}
   ${XENOMAI_LIBRARY_RTDM}
 )
endif(XENOMAI_FOUND AND COVISE_USE_XENOMAI)


#cover_add_plugin(Xenomai
#   coVRML
#   coOpenVehicleUtil
#)

#COVER_INSTALL_PLUGIN(Xenomai)
