MACRO(USE_EMBREE3)
  covise_find_package(embree 3.0.0)

include_directories(${EMBREE_INCLUDE_DIRS})

  IF ((NOT (EMBREE3_FOUND OR embree_DIR)) AND (${ARGC} LESS 1))
    USING_MESSAGE("Skipping because of missing EMBREE3")
    RETURN()
  ENDIF((NOT (EMBREE3_FOUND OR embree_DIR)) AND (${ARGC} LESS 1))
  IF(NOT EMBREE3_USED AND (EMBREE3_FOUND OR embree_DIR))
    SET(EMBREE3_USED TRUE)
    INCLUDE_DIRECTORIES(SYSTEM ${EMBREE_INCLUDE_DIRS})
    SET(EXTRA_LIBS ${EXTRA_LIBS} ${EMBREE_LIBRARIES})
  ENDIF()
ENDMACRO(USE_EMBREE3)