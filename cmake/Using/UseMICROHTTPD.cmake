MACRO(USE_MICROHTTPD)
  FIND_PACKAGE(Microhttpd)
  IF ((NOT MICROHTTPD_FOUND) AND (${ARGC} LESS 1))
    USING_MESSAGE("Skipping because of missing Microhttpd")
    RETURN()
  ENDIF((NOT MICROHTTPD_FOUND) AND (${ARGC} LESS 1))
  IF(NOT MICROHTTPD_USED AND MICROHTTPD_FOUND)
    SET(MICROHTTPD_USED TRUE)
    INCLUDE_DIRECTORIES(SYSTEM ${MICROHTTPD_INCLUDE_DIR})
    SET(EXTRA_LIBS ${EXTRA_LIBS} ${MICROHTTPD_LIBRARIES})
  ENDIF()
ENDMACRO(USE_MICROHTTPD)

