MACRO(USE_EIGEN)
  FIND_PACKAGE(Eigen3)
  IF (NOT EIGEN3_FOUND)
    FIND_PACKAGE(EIGEN)
    IF ((NOT EIGEN_FOUND)  AND (${ARGC} LESS 1))
        USING_MESSAGE("Skipping because of missing Eigen2 and Eigen3")
        RETURN()
    ENDIF((NOT EIGEN_FOUND) AND (${ARGC} LESS 1))
    IF(NOT EIGEN_USED AND EIGEN_FOUND)
        SET(EIGEN_USED TRUE)
        INCLUDE_DIRECTORIES(${EIGEN_INCLUDE_DIR})
    ENDIF()
  ENDIF (NOT EIGEN3_FOUND)

  IF(NOT EIGEN_USED AND EIGEN3_FOUND)
    SET(EIGEN_USED TRUE)
    INCLUDE_DIRECTORIES(${EIGEN3_INCLUDE_DIR})
  ENDIF()
ENDMACRO(USE_EIGEN)

