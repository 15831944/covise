
# The purpose of this makefile is
# gui-source-code-building from qt-ui-files.  Further
# testing and cleaning functionality can be triggered.
#
# Copyright (c) 2006 Visenso GmbH
ifdef PYTHON_HOME
PYUICOFCOVISE=$(PYTHON_HOME)/bin/pyuic5
else
PYUICOFCOVISE=pyuic5
endif

AUTOGENERATED_WIDGET_PYTHON_MODULES =		\
Tecplot2CoviseGuiBase.py                        \
Cfx2CoviseGuiBase.py                        \
Ensight2CoviseGuiBase.py \
Basic2DGridBase.py                                    \
Basic3DGridBase.py                                    \
BottomBase.py                                       \
WatersurfaceBase.py                                 \
Vector2DVariableBase.py                               \
Vector3DVariableBase.py                               \
ScalarVariableBase.py

UIFILES_LOCATION = designerfiles
UNITTESTS_LOCATION = unittests

AUTOGENERATED_FILES =				\
$(AUTOGENERATED_WIDGET_PYTHON_MODULES)		\
$(AUTOGENERATED_IMAGE_PYTHON_MODULE)

all: $(AUTOGENERATED_WIDGET_PYTHON_MODULES)	\
$(AUTOGENERATED_IMAGE_PYTHON_MODULE) unittests
	@echo "The application is ready for start."

%Base.py: $(UIFILES_LOCATION)/%Base.ui $(UIFILES_LOCATION)/%Base.ui.h
	cp $<.h .
	ldd $(PYUICOFCOVISE) > /tmp/pyuic.ldd.output
	$(PYUICOFCOVISE) $< -o $@ -x
	rm -f `basename $<.h`

%Base.py: $(UIFILES_LOCATION)/%Base.ui
	$(PYUICOFCOVISE) $< -o $@ -x

$(AUTOGENERATED_IMAGE_PYTHON_MODULE): $(IMAGEFILES)
	$(PYUICOFCOVISE) -embed StaticImages $(IMAGEFILES) -o $@

unittests:

#	@echo \(Trigger unittests...
#	@echo The unittests are broken which is bad.  Fix them as soon as there is time.
#	cd $(UNITTESTS_LOCATION) && $(MAKE) unittests
#	cd negotiator/ && $(MAKE) unittests
#	@echo ...unittests done.\)

clean:
	$(RM) $(AUTOGENERATED_FILES)
	$(RM) *.pyc

.PHONY: all unittests clean

# eof
